/* ============================================
   LATE NIGHT THOUGHTS - DARK MODE ONLY
   An immersive experience for midnight reflections
   ============================================ */

/* Premium Typography */
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Instrument+Serif:ital@0;1&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ROOT DESIGN TOKENS
   ============================================ */
:root {
  /* Core palette - Midnight Aurora */
  --midnight-950: #02040a;
  --midnight-900: #080a12;
  --midnight-800: #0f111a;
  --midnight-700: #1a1c2a;
  --midnight-600: #2d2f3f;
  --midnight-500: #4a4c60;
  --midnight-400: #6a6c8a;
  --midnight-300: #9a9cb5;
  --midnight-200: #cacbd9;
  --midnight-100: #e5e6ed;
  --midnight-50: #f5f6fa;

  /* Accent - Aurora glow (vibrant) */
  --aurora-violet: #8b5cf6;
  --aurora-purple: #a855f7;
  --aurora-pink: #ec4899;
  --aurora-blue: #3b82f6;
  --aurora-cyan: #06b6d4;
  --aurora-teal: #14b8a6;
  --aurora-indigo: #6366f1;

  /* Theme variables */
  --bg-base: var(--midnight-950);
  --bg-surface: var(--midnight-900);
  --bg-elevated: var(--midnight-800);
  --text-primary: var(--midnight-50);
  --text-secondary: var(--midnight-300);
  --text-muted: var(--midnight-500);
  --text-faint: var(--midnight-700);

  --border-subtle: rgba(255, 255, 255, 0.04);
  --border-default: rgba(255, 255, 255, 0.08);
  --border-strong: rgba(255, 255, 255, 0.15);

  --font-display: 'Instrument Serif', Georgia, serif;
  --font-body: 'Space Grotesk', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--font-body);
  color: var(--text-primary);
  background: var(--bg-base);
  min-height: 100vh;
  overflow-x: hidden;
}

.font-display { font-family: var(--font-display); }
.font-body { font-family: var(--font-body); }
.font-mono { font-family: var(--font-mono); }

.text-display-lg {
  font-size: clamp(2.5rem, 8vw, 4.5rem);
  line-height: 1;
  letter-spacing: -0.03em;
}

.text-gradient {
  background: linear-gradient(135deg, var(--aurora-violet), var(--aurora-pink), var(--aurora-blue));
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: shimmer 15s linear infinite;
}

/* ============================================
   AMBIENT BACKGROUND SYSTEM
   ============================================ */
.ambient-container {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(100px);
  opacity: 0.4;
  animation: float 25s ease-in-out infinite;
}

.orb-1 {
  width: 800px; height: 800px;
  background: radial-gradient(circle, var(--aurora-violet), transparent 70%);
  top: -300px; right: -200px;
}

.orb-2 {
  width: 700px; height: 700px;
  background: radial-gradient(circle, var(--aurora-blue), transparent 70%);
  bottom: -200px; left: -200px;
  animation-delay: -5s;
}

.orb-3 {
  width: 500px; height: 500px;
  background: radial-gradient(circle, var(--aurora-pink), transparent 70%);
  top: 40%; left: 30%;
  animation-delay: -10s;
  opacity: 0.2;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(40px, -40px) scale(1.1); }
  66% { transform: translate(-30px, 30px) scale(0.9); }
}

.stars, .stars-2, .stars-3 {
  position: absolute;
  inset: -100px;
  pointer-events: none;
}

.stars {
  background-image: 
    radial-gradient(1.5px 1.5px at 20px 30px, rgba(255,255,255,0.9), transparent),
    radial-gradient(4px 4px at 20px 30px, rgba(255,255,255,0.15), transparent),
    radial-gradient(2px 2px at 150px 150px, rgba(255,255,255,0.8), transparent),
    radial-gradient(1px 1px at 40px 70px, rgba(139, 92, 246, 0.6), transparent);
  background-repeat: repeat;
  background-size: 350px 350px;
  opacity: 0.6;
  animation: twinkle 8s ease-in-out infinite alternate, drift 60s linear infinite;
}

.stars-2 {
  background-image: 
    radial-gradient(1.5px 1.5px at 15px 15px, rgba(255,255,255,0.7), transparent),
    radial-gradient(1.2px 1.2px at 85px 45px, rgba(59, 130, 246, 0.4), transparent);
  background-repeat: repeat;
  background-size: 450px 450px;
  opacity: 0.4;
  animation: twinkle 12s ease-in-out infinite alternate-reverse, drift 90s linear infinite reverse;
}

.stars-3 {
  background-image: 
    radial-gradient(1px 1px at 100px 100px, rgba(255,255,255,0.2), transparent),
    radial-gradient(1.5px 1.5px at 300px 300px, rgba(236, 72, 153, 0.2), transparent);
  background-repeat: repeat;
  background-size: 600px 600px;
  opacity: 0.3;
  animation: twinkle 15s ease-in-out infinite alternate, drift 120s linear infinite;
}

@keyframes drift {
  from { transform: translate(0, 0); }
  to { transform: translate(40px, 40px); }
}

@keyframes twinkle {
  0%, 100% { opacity: 0.6; filter: brightness(1); }
  50% { opacity: 0.2; filter: brightness(1.5); }
}

.noise {
  position: absolute; inset: 0; opacity: 0.02;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

/* ============================================
   UI EFFECTS
   ============================================ */
.mist-overlay {
  position: fixed; left: 0; width: 100%; height: 20vh; z-index: 10; pointer-events: none;
}
.mist-top { top: 0; background: linear-gradient(to bottom, var(--bg-base) 0%, transparent 100%); }
.mist-bottom { bottom: 0; background: linear-gradient(to top, var(--bg-base) 0%, transparent 100%); }

.ripple-container {
  position: fixed; inset: 0; z-index: 80; pointer-events: none;
  display: flex; align-items: center; justify-content: center; overflow: hidden;
}
.ripple-wave {
  position: absolute; width: 100vmax; height: 100vmax; border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.1);
  background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
  animation: ripple-out 2s var(--ease-out-expo) forwards;
}
@keyframes ripple-out {
  0% { transform: scale(0); opacity: 0.5; filter: blur(5px); }
  100% { transform: scale(4); opacity: 0; filter: blur(20px); }
}

.shooting-star-success {
  position: fixed; top: 20%; left: 50%; width: 150px; height: 2px;
  background: linear-gradient(90deg, white, transparent);
  z-index: 1; pointer-events: none;
  animation: shooting-star-path 1.5s var(--ease-out-expo) forwards;
}
@keyframes shooting-star-path {
  0% { transform: translate(-100vw, -100vh) rotate(45deg); opacity: 1; }
  100% { transform: translate(100vw, 100vh) rotate(45deg); opacity: 0; }
}

.falling-star {
  position: fixed; width: 100px; height: 1px;
  background: linear-gradient(90deg, white, transparent);
  pointer-events: none; z-index: 5;
  animation: falling-star-drift 3s linear forwards;
}
@keyframes falling-star-drift {
  0% { transform: translate(0, 0) rotate(20deg) scale(0); opacity: 0; }
  10% { transform: translate(20px, 20px) rotate(20deg) scale(1); opacity: 1; }
  90% { transform: translate(180px, 180px) rotate(20deg) scale(1); opacity: 1; }
  100% { transform: translate(200px, 200px) rotate(20deg) scale(0); opacity: 0; }
}

.typing-particle {
  position: absolute; width: 3px; height: 3px; border-radius: 50%;
  background: var(--particle-color, white); pointer-events: none;
  box-shadow: 0 0 4px var(--particle-color, white);
  animation: particle-drift 0.8s ease-out forwards;
}
@keyframes particle-drift {
  0% { transform: translate(0, 0) scale(1); opacity: 0.8; }
  100% { transform: translate(var(--x), var(--y)) scale(0); opacity: 0; }
}

.card-glow {
  position: absolute; inset: 0; border-radius: inherit; pointer-events: none; z-index: -1;
  box-shadow: 0 0 40px -10px var(--mood-glow-color, transparent);
  opacity: 0; transition: opacity 0.8s var(--ease-out-expo);
}
.group:hover .card-glow { opacity: 0.15; }

.ink-flow-text {
  mask-image: linear-gradient(to right, black 50%, transparent 100%);
  mask-size: 300% 100%; mask-repeat: no-repeat;
}
.ink-flow-active { animation: ink-flow 1.2s var(--ease-out-expo) forwards; }
@keyframes ink-flow {
  0% { mask-position: 100% 0; opacity: 0; transform: translateX(-5px); }
  100% { mask-position: 0% 0; opacity: 1; transform: translateX(0); }
}

/* ============================================
   FEED TRANSITIONS
   ============================================ */
.feed-exit { animation: cloud-drift-out 0.6s var(--ease-out-expo) forwards; }
.feed-enter { animation: cloud-drift-in 0.8s var(--ease-out-expo) forwards; }
@keyframes cloud-drift-out {
  0% { opacity: 1; transform: scale(1); filter: blur(0px); }
  100% { opacity: 0; transform: scale(1.05); filter: blur(10px); }
}
@keyframes cloud-drift-in {
  0% { opacity: 0; transform: scale(0.95); filter: blur(10px); }
  100% { opacity: 1; transform: scale(1); filter: blur(0px); }
}

/* ============================================
   SCROLLBAR & UTILS
   ============================================ */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-thumb { background: var(--border-default); border-radius: 10px; }
::selection { background: var(--aurora-violet); color: white; }

.scroll-progress-container {
  position: fixed; top: 0; left: 0; width: 100%; height: 2px; z-index: 100; pointer-events: none;
}
.scroll-progress-bar {
  height: 100%; background: linear-gradient(90deg, transparent, var(--aurora-violet));
  position: relative; will-change: width;
}
.shooting-star-head {
  position: absolute; right: 0; top: 50%; transform: translateY(-50%);
  width: 4px; height: 4px; background: white; border-radius: 50%;
  box-shadow: 0 0 10px white, 0 0 20px var(--aurora-violet);
}

.theme-dusk { --aurora-violet: #7c3aed; --aurora-blue: #2563eb; --aurora-pink: #db2777; }
.theme-dawn { --aurora-violet: #a78bfa; --aurora-blue: #60a5fa; --aurora-pink: #f472b6; --bg-base: #05070f; }
.theme-midnight { --aurora-violet: #8b5cf6; --aurora-blue: #3b82f6; --aurora-pink: #ec4899; }
